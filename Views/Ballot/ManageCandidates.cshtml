@model SEMS.Models.Ballot.CandidateModel
@{
    @using System.Data;
    ViewData["Title"] = "ManageCandidates";
    Layout = "~/Views/Shared/_Layout.cshtml";
    DataSet posts = ViewBag.posts,panchayats=ViewBag.panchayats,constituencies=ViewBag.constituencies,parties=ViewBag.parties;
}
<script>
    function SubmitForm(item)
    {
        document.getElementById('hidPostCause').value = item;
        document.getElementById('frmCandidate').submit();
    }
    function ShowParty() { 
        var chk = document.getElementById('chkIndependent');
       
        if (chk.checked == true)
            document.getElementById('divParty').style.display = "none";
        else
            document.getElementById('divParty').style.display = "block";
    }
    
</script>

<form id="frmCandidate" method="post">
   <input type="hidden" id="hidStatus" asp-for="formStatus" />
    <input type="hidden" id="hidPostCause" asp-for="postCause" />
    <div class="container">
        <div class="row">
            <h2 class="pageheading">Manage Candidates</h2>
            <hr />
        </div>
        <div class="row" id="divMain">
            @{
                List<SelectListItem>
                items = new List<SelectListItem>();
                foreach (DataRow row in posts.Tables[0].Rows)
                {
                    SelectListItem s = new SelectListItem();
                    s.Text = row["POSTNAME"].ToString();
                    s.Value = row["TYPE_CODE"].ToString();
                    items.Add(s);
                }
            }
            <div class="col-sm-4">
                <label class="form-label mylabel" for="ddwnPost">Contesting For</label>
                <select class="form-select mycontrol" id="ddwnPost" asp-for="pstCode" asp-items="@items" onchange="SubmitForm('ddwnPost');">
                </select>
            </div>
            @{
                if (Model.pstCode=="1")
                {
                    items.Clear();
                    foreach (DataRow row in panchayats.Tables[0].Rows)
                    {
                        SelectListItem s = new SelectListItem();
                        s.Text = row["PAN_NAME"].ToString();
                        s.Value = row["PNO"].ToString();
                        items.Add(s);
                    }
                                <div class="col-sm-4">
                                    <label class="form-label mylabel" for="ddwnPanchayat">Panchayat</label>
                            <select class="form-select mycontrol" id="ddwnPanchayat" asp-for="panchayat" name="panchayat" asp-items="@items" onchange="SubmitForm('ddwnPanchayat');">
                                    </select>
                                </div>
                }
                items.Clear();
                foreach (DataRow row in constituencies.Tables[0].Rows)
                {
                    SelectListItem s = new SelectListItem();
                    s.Text = row["CONST_NAME"].ToString();
                    s.Value = row["CONST_CODE"].ToString();
                    items.Add(s);
                }
                    <div class="col-sm-4">
                        <label class="form-label mylabel" for="ddwnConstituency">Constituency</label>
                        <select class="form-select mycontrol" id="ddwnConstituency" asp-for="constCode" asp-items="@items">
                        </select>
                    </div>
            }
        </div>
        @{
            if(Model.formStatus=="add")
            {
                    <div class="row" id="divAdd" style="margin-top:10px;">

                        <div class="col-sm-8 border">
                            <div class="row">

                                <div class="col-sm-6">
                                    <label class="form-label mylabel" for="txtCname">Candidate Name</label>
                                    <input type="text" id="txtCname" class="form-control" asp-for="cName" placeholder="Enter Candidate's Name" />
                                </div>
                                <div class="col-sm-6">
                                    <label class="form-label mylabel" for="txtCnameV1">Candidate Name (Hindi)</label>
                                    <input type="text" id="txtCnameV1" class="form-control" asp-for="cNameV1" placeholder="Enter Candidate's Name in Hindi" />
                                </div>
                                <div class="col-sm-6">
                                    <label class="form-label mylabel" for="ddwnGender">Gender</label>
                                    <select class="form-select mycontrol" id="ddwnGender" asp-for="gender" name="gender">
                                        <option value="M">Male</option>
                                        <option value="F">Female</option>
                                        <option value="T">Third Gender</option>
                                    </select>
                                </div>
                                <div class="col-sm-6">
                                    <br />
                                    <input class="form_control" id="chkIndependent" type="checkbox" value="I" asp-for="independent" checked onchange="ShowParty();" />
                                    <label class="form-label mylabel" for="chkIndependent">Whether Independent</label>
                                </div>
                                @{
                                items.Clear();
                                foreach (DataRow row in parties.Tables[0].Rows)
                                {
                                    SelectListItem s = new SelectListItem();
                                    s.Text = row["PANAME"].ToString();
                                    s.Value = row["PACODE"].ToString();
                                    items.Add(s);
                                }
                                }
                                <div class="col-sm-6" id="divParty" style="display:none">
                                    <label class="form-label mylabel" for="ddwnParties">Political Party</label>
                                    <select class="form-select mycontrol" id="ddwnParties" asp-for="pacode" asp-items="@items">
                                    </select>
                                </div>
                                <p></p>
                            </div>
                        </div>

                    </div>
            }
        }
       
    </div>
</form>

