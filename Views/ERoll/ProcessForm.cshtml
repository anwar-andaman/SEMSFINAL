@model ProcessFormModel
@{
    @using System.Data;
    ViewData["Title"] = "ProcessForm";
    Layout = "~/Views/Shared/_Layout.cshtml";
    DataSet panchayats = ViewBag.panchayats, wards = ViewBag.wards, tehsils = ViewBag.tehsils;
    DataSet rlnTypes = ViewBag.rlnTypes, villages = ViewBag.villages, addressTehsils = ViewBag.addressTehsils;
    string logUserType = Context.Session.GetString("logUserType");
    string selectedPanchayat = ViewBag.selectedPanchayat;
    DataSet selectedWard = ViewBag.selectedWard;
}
<script>
    function EditPS() { 
        document.getElementById('ddwnTehsil').disabled = false;
        document.getElementById('ddwnPanchayat').disabled = false;
        document.getElementById('ddwnWard').disabled = false;
        document.getElementById('btnEditPS').style.display = "none";
        document.getElementById('ddwnWard').focus();
    }
    function SubmitForm() { 
        document.getElementById('frmProcessForm').submit();
    }
</script>

<form id="frmProcessForm" method="post">
    <input type="hidden" id="hidPostCause" asp-for="postCause" />
    <input type="hidden" id="hidPanMun" asp-for="panMun" />
    <input type="hidden" id="hidformid" asp-for="formid" />
    <input type="hidden" id="hidformType" asp-for="formType" />
    <input type="hidden" asp-for="revisionNo" value="@ViewBag.revisionNo" />
    <input type="hidden" asp-for="revisionYear" value="@ViewBag.revisionYear" />
   
    <div class="container">
        <div class="modal fade" id="AgeProof" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Age Proof</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        @{
                            
                            var base64 = Convert.ToBase64String(Model.ageProof);
                            var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                        }
                        <img id="imgAgeProof" src="@imgSrc" style="width:750px;height:900px;"/>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                        
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="AddressProof" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Address Proof</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        @{

                            var base64Add = Convert.ToBase64String(Model.addressProof);
                            var imgSrcAdd = String.Format("data:image/gif;base64,{0}", base64Add);
                        }
                        <img id="imgAddProof" src="@imgSrcAdd" style="width:750px;height:900px;border:solid" />
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>

                    </div>
                </div>
            </div>
        </div>
        <h2 class="pageheading">Form Processing </h2>
        <div class="row" style="padding-left:10px;padding-right:10px;border-top-left-radius:10px;border-top-right-radius:10px;">
            <div class="col-sm-12" style="text-align:center; background-color:darkcyan; color:white;font-size:large;border-top-left-radius:10px;border-top-right-radius:10px;">
                Polling Station
            </div>
        </div>
        <div class="row" style="margin-left:0px;">
            <div class="col-sm-4">
                <label class="form-label mylabel " for="ddwnTehsil">Tehsil</label>
                @{
                    List<SelectListItem>
                    items = new List<SelectListItem>();
                    SelectListItem listItem = new SelectListItem();
                    listItem.Text = "<----Select---->";
                    listItem.Value = "";
                    items.Add(listItem);
                    foreach (DataRow row in tehsils.Tables[0].Rows)
                    {
                        SelectListItem s = new SelectListItem();
                        s.Text = row["TNAME"].ToString();
                        s.Value = row["TCODE"].ToString();
                        // s.Selected = row["PCODE"].ToString() == selectedPanchayat ? true : false;
                        items.Add(s);
                    }
                }
                <select asp-for="tehsil" id="ddwnTehsil" name="tehsil" class="form-select mycontrol" asp-items="@items" onchange="document.getElementById('hidPostCause').value='tehsil';document.getElementById ('frmProcessForm').submit ();" disabled></select>
            </div>
            <div class="col-sm-4">
                <label class="form-label mylabel " for="ddwnPanchayat">Panchayat</label>
                @{
                    items.Clear();
                    listItem.Text = "<----Select---->";
                    listItem.Value = "";
                    items.Add(listItem);
                    foreach (DataRow row in panchayats.Tables[0].Rows)
                    {
                        SelectListItem s = new SelectListItem();
                        s.Text = row["PAN_NAME"].ToString();
                        s.Value = row["PCODE"].ToString();
                        items.Add(s);
                    }
                }
                <select asp-for="panchayat" id="ddwnPanchayat" name="panchayat" class="form-select mycontrol" asp-items="@items" onchange="document.getElementById('hidPostCause').value='panchayat';document.getElementById ('frmProcessForm').submit ();" disabled></select>
            </div>
            <div class="col-sm-4">
                <label class="form-label mylabel" for="ddwnWard">Ward</label>
                @{
                    items.Clear();
                    listItem.Text = "<----Select---->";
                    listItem.Value = "";
                    items.Add(listItem);
                    foreach (DataRow row in wards.Tables[0].Rows)
                    {
                        SelectListItem s = new SelectListItem();
                        s.Text = row["WARD_NAME"].ToString();
                        s.Value = row["CONST_NO"].ToString();
                        // s.Selected = row["PCODE"].ToString() == selectedPanchayat ? true : false;
                        items.Add(s);
                    }
                }
                <select asp-for="ward" id="ddwnWard" name="ward" class="form-select mycontrol" asp-items="@items" disabled></select>
                <button id="btnEditPS" type="button" class="btn btn-link link-success" onclick="EditPS();">Edit Polling Station</button>
            </div>
            @{
                if (Model.formType == "A")
                {
                    <div class="row" style="padding-left:10px;padding-right:10px;border-top-left-radius:10px;border-top-right-radius:10px;">
                        <div class="col-sm-12" style="text-align:center; background-color:darkcyan; color:white;font-size:large;border-top-left-radius:10px;border-top-right-radius:10px;">
                            Personal Details
                        </div>
                    </div>
                    <div class="row" style="margin-left:0px;">
                        <div class="row">
                            <div class="col-sm-10">
                                <div class="row">
                                        <div class="col-sm-5">
                                            <label class="form-label mylabel " for="txtName">Name</label>
                                            <input type="text" id="txtName" asp-for="ename" name="ename" class="form-control" disabled />
                                        </div>
                                        <div class="col-sm-2">
                                            <label class="form-label mylabel " for="ddwnRlnType">Relation Type</label>
                                            <input type="text" id="txtrlnType" asp-for="rlnType" name="rlnType" class="form-control" disabled />
                                        </div>
                                        <div class="col-sm-5">
                                            <label class="form-label mylabel" for="txtRlnName">Relative Name</label>
                                            <input type="text" id="txtRlnName" asp-for="rlnName" name="rlnName" class="form-control" disabled />
                                        </div>
                                </div>
                                <div class="row" style="margin-left:0px;margin-top:10px;">
                                    <div class="col-sm-3">
                                        <label class="form-label mylabel " for="radDob">Age/Date of Birth</label>
                                        <input type="text" id="txtDob" asp-for="dob" name="rlnName" class="form-control" disabled />
                                    </div>
                                    <div class="col-sm-2">
                                        <label class="form-label mylabel " for="selGender">Gender</label>
                                        <input type="text" id="txtGender" asp-for="gender" name="gender" class="form-control" disabled/>
                                    </div>
                                    <div class="col-sm-3">
                                        <br />
                                        <button class="btn btn-danger" type="button" data-bs-toggle="modal" data-bs-target="#AgeProof" style="margin-top:9px;">See Age Proof</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                @{

                                    var base64Photo = Convert.ToBase64String(Model.photo);
                                    var imgSrcPhoto = String.Format("data:image/gif;base64,{0}", base64Photo);
                                }
                                <img src="@imgSrcPhoto" style="width:110px;height:130px;margin-top:10px;"/>
                            </div>
                        </div>
                        
                    </div>

                    <div class="row" style="padding-left:10px;padding-right:10px;border-top-left-radius:10px;border-top-right-radius:10px;margin-top:10px;">
                        <div class="col-sm-12" style="text-align:center; background-color:darkcyan; color:white;font-size:large;border-top-left-radius:10px;border-top-right-radius:10px;">
                            Address & Contact Details
                        </div>
                    </div>

                    <div class="row" style="margin-left:0px;">
                        <div class="col-sm-2">
                            <label class="form-label mylabel " for="txtHouseNo">House No.</label>
                            <input type="text" id="txtHouseNo"  asp-for="houseNo" name="houseNo" class="form-control" />
                        </div>
                        <div class="col-sm-5">
                            <label class="form-label mylabel " for="txtAddLine1">Address Line1</label>
                            <input type="text" id="txtAddLine1" asp-for="addLine1" name="addLine1" class="form-control" />
                        </div>
                        <div class="col-sm-5">
                            <label class="form-label mylabel" for="txtAddLine2">Address Line2</label>
                            <input type="text" id="txtAddLine2"  asp-for="addLine2" name="addLine2" class="form-control" />
                        </div>
                    </div>
                    <div class="row" style="margin-left:0px;">
                        <div class="col-sm-4">
                            <label class="form-label mylabel " for="ddwnAddressTehsil">Tehsil</label>
                            <input type="text" id="txttehsil" asp-for="addressTehsil" name="addressTehsil" class="form-control" />
                        </div>
                        <div class="col-sm-4">
                            <label class="form-label mylabel " for="ddwnVillage">Village</label>
                            <input type="text" id="txtvillage" asp-for="village" name="village" class="form-control" />
                        </div>
                        <div class="col-sm-4">
                            <label class="form-label mylabel" for="txtPost">Post Office</label>
                            <input type="text" id="txtPost" asp-for="post" name="post" class="form-control" />
                        </div>
                        <div class="col-sm-3">
                            <label class="form-label mylabel " for="txtMobile">Mobile No.</label>
                            <input type="tel" id="txtMobile"  asp-for="mobileNo" name="mobileNo" class="form-control"  />
                        </div>
                        <div class="col-sm-4">
                            <label class="form-label mylabel " for="txtEmail">Email ID</label>
                            <input type="email" id="txtEmail" asp-for="email" name="email" class="form-control" />
                        </div>
                        <div class="col-sm-3">
                            <br />
                            <button class="btn btn-danger" type="button" data-bs-toggle="modal" data-bs-target="#AddressProof" style="margin-top:9px;">See Address Proof</button>
                        </div>
                        <p></p>
                        <hr />
                    </div>
                }
                else if (Model.formType == "D")
                {
                    
                }
            }
        </div>
    </div>
    
</form>